---
---
<div class="power-law-comparison interactive-game-container">
    <canvas id="powerLawChart"></canvas>
</div>

<style>
    .power-law-comparison {
        width: 100%;
        max-width: 320px;
        height: 240px;
        margin: 20px auto;
        position: relative;
    }
</style>

<script>
    import Chart from 'chart.js/auto';

    // Generate data for power law distribution
    const labels: number[] = [];
    const powerLawData: number[] = [];

    // X-axis: 0 to 17
    for(let i = 0; i <= 17; i += 0.2) {
        labels.push(i);
        
        // Power law distribution: y = A * x^(-alpha)
        // Adjust to avoid infinity at x=0
        const xShifted = i + 0.5;
        const alpha = 1.5;
        const A = 2;
        const powerValue = A * Math.pow(xShifted, -alpha);
        powerLawData.push(powerValue);
    }

    const ctx = document.getElementById('powerLawChart') as HTMLCanvasElement;
    if(ctx) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels.map(x => x.toFixed(1)),
                datasets: [
                    {
                        label: '幂律分布',
                        data: powerLawData,
                        borderColor: '#ff6384',
                        backgroundColor: '#ff638422',
                        borderWidth: 3,
                        fill: true,
                        pointRadius: 0,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            boxWidth: 12,
                            font: { size: 11 }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#333',
                        bodyColor: '#666',
                        borderColor: '#ddd',
                        borderWidth: 1
                    },
                    title: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: '数值',
                            font: { size: 11 }
                        },
                        ticks: {
                            maxTicksLimit: 6,
                            font: { size: 10 }
                        },
                        grid: { display: false }
                    },
                    y: {
                        title: {
                            display: true,
                            text: '频率',
                            font: { size: 11 }
                        },
                        ticks: {
                            display: false
                        },
                        grid: { color: '#eee' }
                    }
                }
            }
        });
    }
</script>
